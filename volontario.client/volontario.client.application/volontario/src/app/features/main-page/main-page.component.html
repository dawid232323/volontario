<div>
  <app-nav
    [isPreviewMode]="previewMode"
    [sections]="mainPageContent?.sections || []"></app-nav>
  <section
    *ngFor="let section of mainPageContent?.sections; let i = index"
    [id]="section.id"
    class="relative h-auto lg:min-h-[100vh] flex flex-col items-center justify-center">
    <div
      class="absolute left-0 top-0 w-full overflow-hidden leading-[0]"
      *ngIf="i !== 0">
      <svg
        data-name="Layer 1"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1200 120"
        preserveAspectRatio="none">
        <path
          d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
          class="fill-bgPrimary"></path>
      </svg>
    </div>
    <div
      [ngClass]="{ 'w-full': section.tiles.length !== 0 }"
      class="text-black flex flex-col pt-[2rem] lg:pt-0 lg:px-14 lg:flex-row justify-center items-center gap-x-12">
      <div
        [ngClass]="[getWidthClass(section.tiles)]"
        [ngStyle]="{ 'padding-top': getPaddingTopClass(section.tiles) }"
        class="relative flex flex-col items-center md:items-start">
        <svg
          *ngIf="section.tiles.length === 0"
          xmlns="http://www.w3.org/2000/svg"
          class="fill-black opacity-5 hidden md:block md:absolute w-1/2 top-0 left-0 -translate-y-[60%]"
          viewBox="0 0 512 512">
          <!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
          <path
            d="M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z" />
        </svg>
        <div
          [ngClass]="{
            'items-center': section.tiles.length > 0 || windowWidth < 640,
            'justify-center': section.tiles.length > 0 || windowWidth < 640
          }"
          class="flex flex-row w-full">
          <h1 class="!font-extrabold !text-4xl">
            {{ section.title }}
          </h1>
        </div>
        <p
          class="!text-justify 2xl:text-xl !font-bold lg:w-3/4 w-full px-6 lg:px-0"
          [innerHTML]="section.content"></p>
      </div>
      <img
        *ngIf="section.tiles.length === 0"
        [src]="resolveImagePath(section.imageCategory)"
        class="py-10 lg:py-0 w-9/12 lg:w-1/2" />
    </div>
    <div
      *ngIf="section.tiles.length > 0"
      [ngClass]="[
        getGridColsClass(section.tiles),
        getPaddingBottomClass(section.tiles)
      ]"
      [ngStyle]="{ 'padding-bottom': getPaddingBottomStyle(section.tiles) }"
      class="grid grid-cols-1 md:grid-cols-2 gap-12 justify-center items-center px-10 mb-16">
      <div
        *ngFor="let tile of section.tiles"
        class="bg-bgPrimaryLight 2xl:w-[400px] 2xl:h-[500px] w-[300px] h-[400px] rounded-lg flex flex-col py-12 items-center text-white transform transition duration-500 hover:scale-105">
        <h2
          class="flex items-center justify-center text-center space-x-3 !text-2xl px-3">
          <mat-icon *ngIf="!isNil(tile.stepIcon) || tile.stepIcon !== ''">{{
            tile.stepIcon
          }}</mat-icon>
          <span class="2xl:text-3xl">{{ tile.title }}</span>
        </h2>
        <p class="p-4 text-left 2xl:text-xl">{{ tile.stepContent }}</p>
      </div>
    </div>

    <div class="absolute left-0 bottom-0 w-full overflow-hidden leading-[0]">
      <svg
        data-name="Layer 1"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1200 120"
        preserveAspectRatio="none">
        <path
          d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z"
          class="fill-bgPrimary"></path>
      </svg>
    </div>
  </section>
</div>
